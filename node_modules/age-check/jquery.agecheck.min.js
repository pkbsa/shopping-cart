!function(a){a.ageCheck=function(b){var c=a.extend({minAge:21,redirectTo:"",redirectOnFail:"",title:"Age Verification",copy:"This Website requires you to be [21] years or older to enter. Please enter your Date of Birth in the fields below in order to continue:"},b),d={month:"",day:"",year:"",age:"",errors:Array(),setValues:function(){var b=a(".ac-container .month").val(),c=a(".ac-container .day").val();d.month=b,d.day=c.replace(/^0+/,""),d.year=a(".ac-container .year").val()},validate:function(){return d.errors=[],/^([0-9]|[12]\d|3[0-1])$/.test(d.day)===!1&&d.errors.push("Day is invalid or empty"),/^(19|20)\d{2}$/.test(d.year)===!1&&d.errors.push("Year is invalid or empty"),d.clearErrors(),d.displayErrors(),d.errors.length<1},clearErrors:function(){a(".errors").html("")},displayErrors:function(){for(var b="<ul>",c=0;c<d.errors.length;c++)b+="<li><span>x</span>"+d.errors[c]+"</li>";b+="</ul>",setTimeout(function(){a(".ac-container .errors").html(b)},200)},reCenter:function(b){b.css("top",Math.max(0,(a(window).height()-(b.outerHeight()+150))/2)+"px"),b.css("left",Math.max(0,(a(window).width()-b.outerWidth())/2)+"px")},buildHtml:function(){var b=c.copy,e=["January","February","March","April","May","June","July","August","September","October","November","December"],f="";f+='<div class="ac-overlay"></div>',f+='<div class="ac-container">',f+="<h2>"+c.title+"</h2>",f+="<p>"+b.replace("[21]","<strong>"+c.minAge+"</strong>"),f+='<div class="errors"></div>',f+='<div class="fields"><select class="month">';for(var g=0;g<e.length;g++)f+='<option value="'+g+'">'+e[g]+"</option>";f+="</select>",f+='<input class="day" maxlength="2" placeholder="01" />',f+='<input class="year" maxlength="4" placeholder="1989"/>',f+="<button>Submit</button></div></div>",a("body").append(f),a(".ac-overlay").animate({opacity:.8},500,function(){d.reCenter(a(".ac-container")),a(".ac-container").css({opacity:1})}),a(".ac-container .day, .ac-container .year").focus(function(){a(this).removeAttr("placeholder")})},setAge:function(){d.age="";var a=new Date(d.year,d.month,d.day),b=Date.now()-a.getTime(),c=new Date(b);d.age=Math.abs(c.getUTCFullYear()-1970)},setSessionStorage:function(a,b){try{return sessionStorage.setItem(a,b),!0}catch(a){return!1}},handleSuccess:function(){var b="<h3>Success!</h3><p>You are now being redirected back to the application...</p>";a(".ac-container").html(b),setTimeout(function(){a(".ac-container").animate({top:"-350px"},200,function(){a(".ac-overlay").animate({opacity:"0"},500,function(){""!=c.redirectTo?window.location.replace(c.redirectTo):a(".ac-overlay, .ac-container").remove()})})},2e3)},handleUnderAge:function(){var b="<h3>Sorry, you are not old enough to view this site...</h3>";a(".ac-container").html(b),""!=c.redirectOnFail&&setTimeout(function(){window.location.replace(c.redirectOnFail)},2e3)}};return"true"!=sessionStorage.getItem("ageVerified")&&(d.buildHtml(),a(".ac-container button").on("click",function(){d.setValues(),d.validate()===!0&&(d.setAge(),d.age>=c.minAge?(d.setSessionStorage("ageVerified","true")||console.log("sessionStorage not supported by your browser"),d.handleSuccess()):d.handleUnderAge())}),void a(window).resize(function(){d.reCenter(a(".ac-container")),setTimeout(function(){d.reCenter(a(".ac-container"))},500)}))}}(jQuery);
